&emsp;
# Intro
>思考
- $(1, 2, 3)$ 在一个 3D 空间中表示什么？
  - $P = (1, 2, 3)$: 点？
  - $\pmb{a} = (1, 2, 3)$: 向量？向量的坐标？

&emsp;
# 1 点、向量、坐标系
## 1.1 点
3D 空间中点的表示：$P = (1, 2, 3)$

>思考
- 如何将点 $A(x_a, y_a, z_a)$ 移动到点 $B(x_b, y_b, z_b)$
$$B - A = diff，B = A + diff$$

## 1.2 向量
>向量
- 向量可以把想象成从 `原点` 指向某处的一个箭头
- 注意：不要把 `向量` 与 `向量的坐标` 两个概念混淆

>向量的内积/点积/数量积
- 对于 $\pmb{a}, \pmb{b} ∈ \mathbb{R}^3$，内积可以写成：

  $$\pmb{a} · \pmb{b} = \pmb{a}^T \pmb{b} = \sum\limits_{i=1}^3 a_ib_i = |\pmb{a}| |\pmb{b}| cos⟨\pmb{a}, \pmb{b}⟩$$
  - $|\pmb{b}| cos⟨\pmb{a}, \pmb{b}⟩$: 向量 $\pmb{b}$ 在向量 $\pmb{a}$ 上的投影
- 性质
  - $a·b>0$: 方向基本相同，夹角在0°到90°之间
  - $a·b=0$: 正交，相互垂直  
  - $a·b<0$: 方向基本相反，夹角在90°到180°之间
  ```py
  import numpy as np

  vec1 = np.array([1, 2, 3])
  vec2 = np.array([4, 5, 6])

  res1 = vec1 @ vec2
  res2 = np.dot(vec1, vec2)
  res3 = vec1[0]*vec2[0] + vec1[1]*vec2[1] + vec1[2]*vec2[2]

  print(res1)
  print(res2)
  print(res3)
  ```

&emsp;
## 1.3 坐标系

>基
- 如果 $n$ 维空间 $\mathbb{V}$ 中有 $n$ 个向量 $a_1, a_2, ..., a_n \in \mathbb{V}$，满足：
  - $a_1, a_2, ..., a_n$ 线性无关（非零非平行）
  - $\mathbb{V}$ 中任意向量都可以用 $a_1, a_2, ..., a_n$ 表示
- 那么向量组 $a_1, a_2, ..., a_n$ 称为 $n$ 维空间 $\mathbb{V}$ 中的一组基
- 请自行换成三维空间来理解

>正交基
- 在 $n$ 维欧式空间中， 由 $n$ 个非零向量组成的正交向量组称为正交基

>标准正交基（单位正交基）
- 在 n 维空间中，由 n 个单位向量组成的正交向量组称为标准正交基

&emsp;

在 3D 空间中：
- 三个标准正交基：$\pmb{e}_x = [1,0,0]^T$、$\pmb{e}_y = [0,1,0]^T$、$\pmb{e}_z = [0,0,1]^T$
- 将他们放到同一个矩阵中，就会得到一个单位矩阵：
  $$\pmb{I}/\pmb{E} = [\pmb{e}_x, \pmb{e}_y, \pmb{e}_z]=\begin{bmatrix}1&0&0 \\ 0&1&0 \\ 0&0&1\end{bmatrix}$$


&emsp;
# 2 坐标
## 2.1 三维空间坐标

只有指定某个坐标系时，才可以谈论 vector 在此坐标系下的坐标 $(x, y, z)， x,y,z \in \mathbb{R}^3$

怎么描述的呢？如果我们确定一个坐标系，也就是一个线性空间的基 $(\pmb{e}_x, \pmb{e}_y, \pmb{e}_z)$：
- $\pmb{e}_x = (1,0,0)^T$
- $\pmb{e}_y = (0,1,0)^T$
- $\pmb{e}_z = (0,0,1)^T$



那就可以谈论一个向量 $\pmb{a}$ 在这组基下的坐标了

>向量的坐标表示
- 标准分解式：$\pmb{a}=\overrightarrow{OM}=a_x\pmb{e}_x+a_y\pmb{e}_y+a_z\pmb{e}_z$    
- 坐标表示式：$\pmb{a}=(a_x, a_y, a_z)$

$$\pmb{a} = [\pmb{e}_x, \pmb{e}_y, \pmb{e}_z]
\begin{bmatrix}a_x \\ a_y \\ a_z\end{bmatrix}   = a_x\pmb{e}_x + a_y\pmb{e}_y + a_z\pmb{e}_z$$

所以这个坐标的具体取值，一个是和向量本身有关，第二也和坐标系的选取有关。坐标系通常由三个正交的坐标轴组成（尽管也可以有非正交的，但实际中很少见）。例如，我们给定 $x$ 和 $y$ 轴时，$z$ 就可以通过右手（或左手）法则由 $x × y$ 定义出来。根据定义方式的不同，坐标系又分为左手系和右手系。左手系的第三个轴与右手系相反。就经验来讲，人们更习惯使用右手系，尽管也有一部分程序库仍使用左手系

&emsp;
## 2.2 齐次坐标
- B站：[齐次坐标的妙用](https://www.bilibili.com/video/BV1LS4y1b7xZ?spm_id_from=333.337.search-card.all.click&vd_source=ead820d10887c21595d014f264bcbb35)


三维空间中的坐标表示容易混淆，而且到后面，把旋转和平移拼到一个矩阵的时候不是一个方阵（想想如果是方阵有什么好处），所以在 3D 空间中，更加常用的是 `齐次坐标`

它是射影几何里的概念。通过添加最后一维，我们用 4 个实数描述了一个三维向量，这显然多了一个自由度

在齐次坐标中，某个点 $x$ 的每个分量同乘一个非零常数 $k$ 后，仍然表示的是同一个点。因此，一个点的具体坐标值不是唯一的。如 $[1, 1, 1, 1]^T$ 和 $[2, 2, 2, 2]^T$ 是同一个点。但当最后一项不为零时，我们总可以把所有坐标除以最后一项，强制最后一项为 $1$，从而得到一个点唯一的坐标表示（也就是转换成非齐次坐标）

>点
- 将物体进行变换
$$P = (x, y, z, w)=(x/w, y/w, z/w, 1)$$

>向量
- 将坐标轴进行变换
$$\pmb{a} = (x, y, z, 0)^T$$


&emsp;
# 3 位姿

我们现在考虑一个物体，在 SLAM 中，这个物体可以指机器人、传感器（IMU、里程计、相机）。在视觉 SLAM 中，我们通常就指相机。物体的 `位姿` 有两个组成部分用数学的语言去描述的话就是
>位姿
- 物体的朝向: 旋转 $\pmb{R}$
- 物体的位置: 平移 $\pmb{t}$



>旋转主要可以由以下方式表达：
- 旋转矩阵
- 旋转向量（轴角/角轴，AngleAxis）与向量外积
- 欧拉角
- 四元数
- 李群李代数

它们都可以用来描述同一个旋转。我们应该在实际中选择对我们最为方便的形式，而不必拘泥于某种特定的样子。在 SLAM 中通常都使用旋转向量（后面拓展为李群李代数）。其它的应用例如，为了没有奇异性，我们可以选用四元数来表达；为了交互，使用欧拉角；为了优化变量时，选用李群李代数